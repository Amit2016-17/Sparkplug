<!--
  Copyright (c) 2016 Cirrus Link Solutions

  All rights reserved. This program and the accompanying materials
  are made available under the terms of the Eclipse Public License v1.0
  which accompanies this distribution, and is available at
  http://www.eclipse.org/legal/epl-v10.html

 Contributors:
   Cirrus Link Solutions
-->

<script type="text/javascript">
    RED.nodes.registerType('sparkplug',{     
        category: 'output',
        defaults: {
            name: {value:""},
            broker: {value:"tcp://localhost", required:true},
            port: {value:"1883", required:true},
            clientid: {value:'NodeREDSimpleEdgeNode', required:true},
            groupid: {value:'Sparkplug Devices', required:true},
            edgenode: {value:'Node-RED Edge Node', required:true},
            enablecache: {value: "false"},
            user: {value: "admin"},
            password: {value: "changeme"}
        },
        credentials: {
            user: {type:"text"},
            password: {type: "password"}
        },
        color:"#d8bfd8",
        inputs:1,
        outputs:1,
        icon: "bridge.png",
        align: "right",
        label: function() {
            return this.name||"sparkplug";
        },
        labelStyle: function() {
            return this.name?"node_label_italic":"";
        }
    });
</script>

<script type="text/x-red" data-template-name="sparkplug">
    <div class="form-row">
        <label for="node-input-broker"><i class="fa fa-globe"></i> Server</label>
        <input type="text" id="node-input-broker" placeholder="Server URL">
    </div>
    <div class="form-row">
        <label for="node-input-port"><i class="fa fa-globe"></i> Port</label>
        <input type="text" id="node-input-port" placeholder="Server Port" style="width:45px">
    </div>
    <div class="form-row">
        <label for="node-input-user"><i class="fa fa-user"></i> Username</label>
        <input type="text" id="node-input-user" placeholder="Username">
    </div>
    <div class="form-row">
        <label for="node-input-password"><i class="fa fa-lock"></i> Password</label>
        <input type="password" id="node-input-password" placeholder="Password">
    </div>
    <div class="form-row">
        <label for="node-input-clientid"><i class="fa fa-tag"></i> Client ID</label>
        <input type="text" id="node-input-clientid" placeholder="Client ID">
    </div>
    <div class="form-row">
        <label for="node-input-groupid"><i class="fa fa-tag"></i> Group ID</label>
        <input type="text" id="node-input-groupid" placeholder="Group ID">
    </div>
    <div class="form-row">
        <label for="node-input-edgenode"><i class="fa fa-tag"></i> Edge Node</label>
        <input type="text" id="node-input-edgenode" placeholder="Edge Node">
    </div>
    <div class="form-row">
        <label for="node-input-enablecache"><i class="fa fa-tag"></i> Enable Cache</label>
        <select id="node-input-enablecache" style="width:125px !important">
            <option value="false">False</option>
            <option value="true">True</option>
        </select>
    </div>
</script>

<script type="text/x-red" data-help-name="sparkplug">
    <p>A Sparkplug edge node that connects to an MQTT broker and publishes birth and data messages for the edge node and
       any input devices.</p>
</script>